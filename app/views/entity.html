<div class="entity-view">
  <div class="entity-header">
    <div class="container container-xxlg" layout="row" layout-align="space-between center">
      <a href="#/" class="arrow-left"></a>
      <h1 flex><strong ng-bind="vm.entity.name"></strong></h1>
      <img src="images/logo.png" alt="">
    </div>
  </div>
  <section class="entity-view-content" layout="row">
    <div layout="column" flex="40" >
      <div class="entity-view-main" ng-show='vm.entity'>
        <h2 class="hl-text">{{vm.entity.balance | currency}} MDP en deuda</h2>
        <h3>
            Deuda per capita: <strong>{{vm.entity.balancePerCapita | currency }}</strong> <br/>
            Porcentaje del PIBE: <strong>{{vm.entity.balancegdp | number : 2}} %</strong> <br/>
            Porcentaje del ingreso comprometido: <strong>{{vm.commited[vm.entity.name] | number : 2}} %</strong>
          </h3>
      </div>
      <md-list class='graph-list' ng-show='vm.entity'>
        <md-subheader class="md-no-sticky hl-text">Administraciones</md-subheader>
        <md-divider></md-divider>
        <md-list-item class="md-3-line" ng-repeat="(key,admon) in vm.administrations | orderBy:'-start'">
          <div class='bar' ng-style='vm.getAdministrationStyle(admon,key)'></div>
          <img class="md-avatar" ng-src='{{admon.local_picture || "pictures/placeholder.png"}}'>
          <div class="md-list-item-text">
            <h3><strong>{{ admon.governor }}</strong></h3>
            <h4>{{ admon.start | date }} - {{ admon.end | date }}</h4>
            <!--
            <p class="italic-text"><strong>Incremento la deuda por {{ admon.stats.entityStats.delta.debt * 1000000 | mdp}} </strong></p> -->
            <span ng-if='admon.deltaDebt > 0'>Incrementó</span>
            <span ng-if='admon.deltaDebt < 0'>Disminuyó</span> la deuda aproximadamente:
            <br/>
            <strong>{{admon.deltaDebt | currency }}</strong> MDP.
            <strong>{{admon.deltaDebtPerCapita | currency}}</strong> pesos por persona.
            <strong>{{admon.deltaDebtgdp | number : 2}}% </strong> del PIBE.
            </span>
            <!-- <p> <strong>{{ admon.stats.obStats.count }}</strong> creditos por un total de <strong>{{ admon.stats.obStats.sum | mdp }}</strong></p>
              <p>aún se debe <strong> {{ admon.stats.obStats.balance | mdp }} </strong></p> -->
          </div>
        </md-list-item>
      </md-list>
    </div>
    <div layout='column' flex-gt-md="60" flex="100">
      <div class="entity-view-main" ng-show='vm.entity' hide-gt-md>
        <h2 class="hl-text">{{vm.entity.balance | currency}} MDP en deuda</h2>
        <h3>Deuda Per Capita: <strong>{{vm.entity.balancePerCapita | currency }}</strong></h3>
      </div>
      <div layout-fill class="detailed-list">
        <h1>Historico de Deuda</h1>
        <p>La siguiente grafica muestra el histórico de la deuda en {{vm.entity.name}} representada por la linea solida azul. </p>
        <p>Las barras representan la suma de los creditos contratados cada año según el registro de obligaciones y emprésitos. </p>
        <nvd3 flex options="vm.multyChartServiceOptions" data="vm.formatEntity" api='vm.api'></nvd3>
        <graph-images data="vm.graphImages"></graph-images>
        <h4>Registro de Obligaciones y Emprésitos Vigente de Entidades, Municipios y sus Organismos <span></span></h4>

        <h4>LISTA DETALLADA | <span>Lorem Ipsum</span></h4>
        <md-data-table-container ng-show='vm.obligations' flex>
          <table md-data-table md-progress="deferred">
            <thead md-order="vm.query.order" md-trigger="onOrderChange">
              <tr>
                <th name="Acreditado" order-by="acredited"></th>
                <th name="Acreedor" order-by="creditor"></th>
                <th name="Destino" order-by="destination"></th>
                <th name="Fecha de Firma" order-by="signDate"></th>
                <th numeric name="Monto" unit="$" order-by="ammount"></th>
                <th numeric name="Saldo" unit="$" order-by="balance"></th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="obligation in vm.obligations | orderBy:vm.query.order">
                <td>{{obligation.acredited}}</td>
                <td>{{obligation.creditor}}</td>
                <td>{{obligation.destination}}</td>
                <td>{{obligation.signDate | date}}</td>
                <td>{{obligation.ammount | mdp}}</td>
                <td>{{obligation.balance | mdp}}</td>
              </tr>
            </tbody>
          </table>
        </md-data-table-container>
      </div>
    </div>
  </section>
</div>
<ng-include src="'views/partials/footer.html'"></ng-include>
